<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Flow Designer</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- PrimeReact Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/primereact/resources/themes/lara-light-cyan/theme.css" />
    <link rel="stylesheet" href="https://unpkg.com/primereact/resources/primereact.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/primeicons/primeicons.css" />
    <script src="https://unpkg.com/primereact/api/api.min.js"></script>
    <script src="https://unpkg.com/primereact/calendar/calendar.min.js"></script>
</head>
<body>
    <div class="toolbar">
        <select id="nodeTypeDropdown">
            <!-- Options will be populated by config.js -->
        </select>
        
        <button id="addTaskButton" class="toolbar-button">Add Task</button>
        
        <button id="saveWorkflowButton" class="toolbar-button">Save Workflow</button>
        <button id="loadWorkflowButton" class="toolbar-button">Load Workflow</button>
        <input type="file" id="loadWorkflowInput" accept=".json" style="display: none;">
        
        <select id="flowlineTypeDropdown">
            <!-- Options will be populated by config.js -->
        </select>
    </div>
    
    <div id="canvas" class="canvas">
        <!-- Nodes will be created here -->
    </div>
    
    <div id="contextMenu" class="context-menu">
        <div class="menu-item" data-action="flowline">Create Flowline</div>
        <div class="menu-item" data-action="rename">Change Name</div>
        <div class="menu-item" data-action="delete">Delete Node</div>
    </div>
    
    <div id="taskContextMenu" class="context-menu">
        <div class="menu-item" data-action="advance">Advance Task</div>
        <div class="menu-item" data-action="reverse">Reverse Task</div>
        <div class="menu-item" data-action="tags">Manage Tags</div>
        <div class="menu-item" data-action="rename">Change Name</div>
        <div class="menu-item" data-action="delete">Delete Task</div>
    </div>
    
    <!-- Tag Context Menu -->
    <div id="tagContextMenu" class="context-menu tag-context-menu">
        <div class="menu-item" data-attribute="category">Category</div>
        <div class="menu-item" data-attribute="option">Option</div>
        <div class="menu-item" data-attribute="date">Date</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="delete">Delete Tag</div>
    </div>
    
    <!-- Tag Attribute Options Menu -->
    <div id="tagAttributeMenu" class="context-menu tag-attribute-menu">
        <!-- Dynamic content will be populated here -->
    </div>
    
    <!-- Date Picker Container -->
    <div id="tagDatePicker" class="tag-date-picker">
        <!-- PrimeReact Calendar will be rendered here -->
    </div>
    
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <h3>Add New Task</h3>
            <input type="text" id="taskNameInput" placeholder="Enter task name..." maxlength="50">
            <div class="modal-buttons">
                <button id="taskModalCancel" class="modal-button cancel">Cancel</button>
                <button id="taskModalCreate" class="modal-button create">Create Task</button>
            </div>
        </div>
    </div>
    
    <div id="advanceTaskModal" class="modal">
        <div class="modal-content">
            <h3>Advance Task</h3>
            <p>Select which node to advance the task to:</p>
            <div id="advanceOptions"></div>
            <div class="modal-buttons">
                <button id="advanceModalCancel" class="modal-button cancel">Cancel</button>
            </div>
        </div>
    </div>
    
    <div id="tagModal" class="modal">
        <div class="modal-content">
            <h3>Manage Task Tags</h3>
            <div id="currentTags" class="current-tags">
                <!-- Current tags will be displayed here -->
            </div>
            
            <div class="tag-form">
                <h4>Add New Tag</h4>
                <div class="tag-selectors">
                    <select id="tagCategoryDropdown">
                        <!-- Options will be populated by config.js -->
                    </select>
                    <select id="tagOptionDropdown" disabled>
                        <!-- Options will be populated based on category selection -->
                    </select>
                    <div class="tag-date-selector">
                        <label for="tagDateInput">Date (optional):</label>
                        <input type="date" id="tagDateInput" class="tag-date-input">
                    </div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button id="tagModalCancel" class="modal-button cancel">Cancel</button>
                <button id="tagModalAdd" class="modal-button create">Add Tag</button>
                <button id="tagModalSave" class="modal-button create">Save Changes</button>
            </div>
        </div>
    </div>
    
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>